import{u as _e,a as ye,b as Te,d as xe,e as ke,w as we,p as F,m as pe,q as Z,n as H,s as x,r as Ce}from"./QList.03baaf7d.js";import{Q as Se,a as Le,b as J}from"./QTable.1a2fee2a.js";import{C as $e,Q as X}from"./country-flag.esm.9cc53f21.js";import{Q as P}from"./QBtn.93945719.js";import{m as le,h as p,a4 as Ie,ao as Ve,r as E,c as q,w as M,g as qe,G as oe,ap as De,B as Qe,M as A,u as G,O as c,P as y,Q as o,a1 as d,Z as n,$ as L,a0 as ee,Y as v,_ as f,aq as te,f as m,a2 as N,F as B,ar as Be,N as W,e as ie,as as Pe,at as Ne}from"./index.9fee2214.js";import{a as j,b as ze,Q as Ee,C as Oe}from"./ClosePopup.7cc99407.js";import{c as U,g as re,h as He,Q as O,e as Me}from"./use-router-link.48f21712.js";import{u as de}from"./vue-i18n.esm-bundler.9f372e45.js";import"./rtl.8a0d094a.js";var je=U({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:T,emit:i}){let h=!1,a,b,l,w,r,k;function C(){a&&a(),a=null,h=!1,clearTimeout(l),clearTimeout(w),b!==void 0&&b.removeEventListener("transitionend",r),r=null}function Q(g,S,$){g.style.overflowY="hidden",S!==void 0&&(g.style.height=`${S}px`),g.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,h=!0,a=$}function t(g,S){g.style.overflowY=null,g.style.height=null,g.style.transition=null,C(),S!==k&&i(S)}function _(g,S){let $=0;b=g,h===!0?(C(),$=g.offsetHeight===g.scrollHeight?0:void 0):k="hide",Q(g,$,S),l=setTimeout(()=>{g.style.height=`${g.scrollHeight}px`,r=I=>{(Object(I)!==I||I.target===g)&&t(g,"show")},g.addEventListener("transitionend",r),w=setTimeout(r,e.duration*1.1)},100)}function s(g,S){let $;b=g,h===!0?C():(k="show",$=g.scrollHeight),Q(g,$,S),l=setTimeout(()=>{g.style.height=0,r=I=>{(Object(I)!==I||I.target===g)&&t(g,"hide")},g.addEventListener("transitionend",r),w=setTimeout(r,e.duration*1.1)},100)}return le(()=>{h===!0&&C()}),()=>p(Ie,{css:!1,appear:e.appear,onEnter:_,onLeave:s},T.default)}});const D=Ve({}),Re=Object.keys(re);var ne=U({name:"QExpansionItem",props:{...re,..._e,...ye,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Te,"click","after-show","after-hide"],setup(e,{slots:T,emit:i}){const{proxy:{$q:h}}=qe(),a=xe(e,h),b=E(e.modelValue!==null?e.modelValue:e.defaultOpened),l=E(null),{hide:w,toggle:r}=ke({showing:b});let k,C;const Q=q(()=>`q-expansion-item q-item-type q-expansion-item--${b.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),t=q(()=>{if(e.contentInsetLevel===void 0)return null;const u=h.lang.rtl===!0?"Right":"Left";return{["padding"+u]:e.contentInsetLevel*56+"px"}}),_=q(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),s=q(()=>{const u={};return Re.forEach(V=>{u[V]=e[V]}),u}),g=q(()=>_.value===!0||e.expandIconToggle!==!0),S=q(()=>e.expandedIcon!==void 0&&b.value===!0?e.expandedIcon:e.expandIcon||h.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),$=q(()=>e.disable!==!0&&(_.value===!0||e.expandIconToggle===!0));M(()=>e.group,u=>{C!==void 0&&C(),u!==void 0&&Y()});function I(u){_.value!==!0&&r(u),i("click",u)}function se(u){u.keyCode===13&&K(u,!0)}function K(u,V){V!==!0&&l.value!==null&&l.value.focus(),r(u),Qe(u)}function ue(){i("after-show")}function ce(){i("after-hide")}function Y(){k===void 0&&(k=we()),b.value===!0&&(D[e.group]=k);const u=M(b,z=>{z===!0?D[e.group]=k:D[e.group]===k&&delete D[e.group]}),V=M(()=>D[e.group],(z,ve)=>{ve===k&&z!==void 0&&z!==k&&w()});C=()=>{u(),V(),D[e.group]===k&&delete D[e.group],C=void 0}}function fe(){const u={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},V=[p(O,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&b.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:S.value})];return $.value===!0&&(Object.assign(u,{tabindex:0,onClick:K,onKeyup:se}),V.unshift(p("div",{ref:l,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),p(H,u,()=>V)}function me(){let u;return T.header!==void 0?u=[].concat(T.header()):(u=[p(H,()=>[p(Z,{lines:e.labelLines},()=>e.label||""),e.caption?p(Z,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&u[e.switchToggleSide===!0?"push":"unshift"](p(H,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>p(O,{name:e.icon})))),e.disable!==!0&&u[e.switchToggleSide===!0?"unshift":"push"](fe()),u}function ge(){const u={ref:"item",style:e.headerStyle,class:e.headerClass,dark:a.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return g.value===!0&&(u.clickable=!0,u.onClick=I,_.value===!0&&Object.assign(u,s.value)),p(pe,u,me)}function he(){return oe(p("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:t.value},He(T.default)),[[De,b.value]])}function be(){const u=[ge(),p(je,{duration:e.duration,onShow:ue,onHide:ce},he)];return e.expandSeparator===!0&&u.push(p(F,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:a.value}),p(F,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:a.value})),u}return e.group!==void 0&&Y(),le(()=>{C!==void 0&&C()}),()=>p("div",{class:Q.value},[p("div",{class:"q-expansion-item__container relative-position"},be())])}});const Fe=["top","middle","bottom"];var ae=U({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Fe.includes(e)}},setup(e,{slots:T}){const i=q(()=>e.align!==void 0?{verticalAlign:e.align}:null),h=q(()=>{const a=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(a!==void 0?` text-${a}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>p("div",{class:h.value,style:i.value,role:"alert","aria-label":e.label},Me(T.default,e.label!==void 0?[e.label]:[]))}});const We={class:"text-left"},Ae={class:"text-left"},Ge={class:"text-center"},Ue={class:"text-center"},Ke={class:"text-center"},Ye={class:"text-center"},Ze={class:"text-center"},Je={class:"text-center"},Xe={class:"text-center"},et={class:"text-left"},tt={class:"text-left"},nt={class:"text-center"},at={class:"text-center"},lt={class:"text-center"},ot={class:"text-right"},it={class:"coefficient-tooltip",cellspacing:"0"},rt={class:"text-right"},dt={class:"text-right"},st={class:"text-center"},ut={class:"text-center"},ct={class:"text-center"},R=A({__name:"IndividualTournamentsDetail",props:{fencerId:null,tournaments:null,division:null,category:null},setup(e){const T=e,i=G();function h(a){var b,l,w;if(!(T.division===null||T.category===null))return(w=(l=(b=i.tournaments)==null?void 0:b[a].competitions[T.division])==null?void 0:l[T.category])==null?void 0:w.results_link}return(a,b)=>(c(),y(Se,{square:"",flat:"",class:"fit-content"},{default:o(()=>[d("thead",null,[d("tr",null,[d("th",We,n(a.$t("tournamentLabel")),1),d("th",Ae,n(a.$t("dateLabel")),1),d("th",Ge,n(a.$t("countryLabel")),1),d("th",Ue,n(a.$t("noParticipantsLabel")),1),d("th",Ke,n(a.$t("ladderTable.fencerDetail.rank")),1),d("th",Ye,n(a.$t("coefficientLabel")),1),d("th",Ze,n(a.$t("ladderTable.fencerDetail.points")),1),d("th",Je,n(a.$t("ladderTable.fencerDetail.tournamentResultsLabel")),1),d("th",Xe,n(a.$t("ladderTable.fencerDetail.tournamentDetailLabel")),1)])]),d("tbody",null,[(c(!0),L(B,null,ee(e.tournaments,l=>{var w;return c(),L("tr",{key:l.tournament_id},[d("td",et,[v(n(f(i).tournaments[l.tournament_id].name)+" ",1),f(i).tournaments[l.tournament_id].championship?(c(),y(ae,{key:0,name:"mdi-trophy",color:"transparent","text-color":"black",class:te(["coeff-badge",{hide:l.coefficients.length===0}])},{default:o(()=>[m(O,{name:"mdi-trophy",class:"championship",size:"larger"}),m(x,null,{default:o(()=>[v(n(a.$t("championship")),1)]),_:1})]),_:2},1032,["class"])):N("",!0)]),d("td",tt,n(a.$d(f(i).tournaments[l.tournament_id].date)),1),d("td",nt,[m(f($e),{country:f(i).tournaments[l.tournament_id].country,shadow:!0,size:"normal"},null,8,["country"]),m(x,null,{default:o(()=>[v(n(a.$t("countries."+f(i).tournaments[l.tournament_id].country)),1)]),_:2},1024)]),d("td",at,n(f(i).tournaments[l.tournament_id].competitions[e.division][e.category].no_participants),1),d("td",lt,n((w=f(i).tournaments[l.tournament_id].competitions[e.division][e.category].results.find(r=>r.fencer_id==e.fencerId))==null?void 0:w.rank),1),d("td",ot,[v(n(Math.round(l.coefficients.map(r=>r.c).reduce((r,k)=>r*k,1)*100)/100)+" ",1),m(ae,{color:"transparent","text-color":"black",class:te(["coeff-badge",{hide:l.coefficients.length===0}])},{default:o(()=>[m(O,{name:"mdi-information-outline"}),m(x,null,{default:o(()=>[d("table",it,[(c(!0),L(B,null,ee(l.coefficients,r=>(c(),L("tr",{key:r.type},[d("td",null,n(a.$t("ladderTable.fencerDetail.coefficientType."+r.type)),1),d("td",rt,n(r.c),1)]))),128)),d("tr",null,[d("td",null,n(a.$t("ladderTable.fencerDetail.coefficientTotal")),1),d("td",dt,n(Math.round(l.coefficients.map(r=>r.c).reduce((r,k)=>r*k,1)*100)/100),1)])])]),_:2},1024)]),_:2},1032,["class"])]),d("td",st,n(l.points),1),d("td",ut,[d("div",null,[m(P,{href:h(l.tournament_id),target:"_blank",icon:"mdi-open-in-new",flat:"",dense:"",round:"",disable:h(l.tournament_id)===void 0},null,8,["href","disable"]),h(l.tournament_id)===void 0?(c(),y(x,{key:0},{default:o(()=>[v(n(a.$t("resultsNoDetailTooltip")),1)]),_:1})):(c(),y(x,{key:1},{default:o(()=>[v(n(a.$t("resultsDetailTooltip")),1)]),_:1}))])]),d("td",ct,[d("div",null,[m(P,{href:"https://hemaratings.com/events/details/"+l.tournament_id,target:"_blank",icon:"mdi-open-in-new",flat:"",dense:"",round:"",disable:l.tournament_id.startsWith("-")},null,8,["href","disable"]),l.tournament_id.startsWith("-")?(c(),y(x,{key:0},{default:o(()=>[v(n(a.$t("hemaratingsNoDetailTooltip")),1)]),_:1})):(c(),y(x,{key:1},{default:o(()=>[v(n(a.$t("hemaratingsDetailTooltip")),1)]),_:1}))])])])}),128))])]),_:1}))}});const ft={class:"text-h6"},mt={key:1,class:"club"},gt={class:"table-container"},ht={class:"table-container"},bt=A({__name:"LadderDetail",props:{modelValue:null,division:null,category:null},emits:["update:modelValue","tournamentDetail"],setup(e,{emit:T}){const i=e,{t:h}=de(),a=G(),b=W({get(){return i.modelValue!=null},set(l){T("update:modelValue",l?i.modelValue:null)}});return(l,w)=>(c(),y(Ce,{modelValue:f(b),"onUpdate:modelValue":w[0]||(w[0]=r=>ie(b)?b.value=r:null)},{default:o(()=>[m(Ee,{class:"fit-content"},{default:o(()=>[m(j,null,{default:o(()=>{var r;return[d("div",ft,[v(n(f(a).people[e.modelValue.fencer_id].name)+" "+n(f(a).people[e.modelValue.fencer_id].surname)+" ",1),e.modelValue.fencer_id.startsWith("-")?N("",!0):(c(),y(P,{key:0,href:"https://hemaratings.com/fighters/details/"+e.modelValue.fencer_id,target:"_blank",icon:"mdi-open-in-new",flat:"",dense:"",round:""},{default:o(()=>[m(x,null,{default:o(()=>[v(n(l.$t("ladderTable.fencerDetail.hemaratingsFencerLinkLabel")),1)]),_:1})]),_:1},8,["href"])),(r=f(a).peopleClubs)!=null&&r[e.modelValue.fencer_id]?(c(),L("span",mt,[v(n(f(a).clubs[f(a).peopleClubs[e.modelValue.fencer_id]].name)+" ",1),f(a).peopleClubs[e.modelValue.fencer_id].startsWith("-")?N("",!0):(c(),y(P,{key:0,href:"https://hemaratings.com/clubs/details/"+f(a).peopleClubs[e.modelValue.fencer_id],target:"_blank",icon:"mdi-open-in-new",size:"sm",flat:"",dense:"",round:""},{default:o(()=>[m(x,null,{default:o(()=>[v(n(l.$t("ladderTable.fencerDetail.hemaratingsClubLinkLabel")),1)]),_:1})]),_:1},8,["href"]))])):N("",!0)])]}),_:1}),e.modelValue.uncounted_tournaments.length>0?(c(),y(j,{key:0},{default:o(()=>[m(ne,{label:l.$t("ladderTable.fencerDetail.countedTournaments"),"model-value":!0,"header-class":"text-subtitle1 text-weight-medium"},{default:o(()=>[d("div",gt,[m(R,{"fencer-id":e.modelValue.fencer_id,tournaments:e.modelValue.counted_tournaments,division:e.division,category:e.category},null,8,["fencer-id","tournaments","division","category"])])]),_:1},8,["label"]),m(ne,{label:l.$t("ladderTable.fencerDetail.uncountedTournaments"),"header-class":"text-subtitle1 text-weight-medium"},{default:o(()=>[d("div",ht,[m(R,{"fencer-id":e.modelValue.fencer_id,tournaments:e.modelValue.uncounted_tournaments,division:e.division,category:e.category},null,8,["fencer-id","tournaments","division","category"])])]),_:1},8,["label"])]),_:1})):(c(),y(j,{key:1},{default:o(()=>[m(R,{"fencer-id":e.modelValue.fencer_id,tournaments:e.modelValue.counted_tournaments,division:e.division,category:e.category},null,8,["fencer-id","tournaments","division","category"])]),_:1})),m(F),m(ze,{align:"right",class:"text-primary"},{default:o(()=>[oe(m(P,{flat:"",label:f(h)("close")},null,8,["label"]),[[Oe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});var vt=Be(bt,[["__scopeId","data-v-05bac6ba"]]);const _t={class:"change new"},yt={class:"change worse"},Tt={class:"change better"},xt={key:1},kt={class:"text-center text-h2",style:{margin:"2rem"}},Dt=A({__name:"LadderView",props:{season:null,division:null,category:null},setup(e){const T=e,{t:i}=de(),h=G();Pe(async()=>{await h.loadSeason(T.season)});const a=W(()=>[{name:"rank",label:i("ladderTable.rankLabel"),field:t=>t.rank,align:"right",sortable:!0},{name:"previous-season-change",label:i("ladderTable.previousSeasonChangeLabel"),field:t=>t.last_season_rank===void 0?null:t.rank-t.last_season_rank,align:"center",sortable:!0,style:"width: fit-content; max-width: fit-content",headerStyle:"width: fit-content; max-width: fit-content"},{name:"name",label:i("ladderTable.nameLabel"),field:t=>h.people[t.fencer_id].name,align:"left",sortable:!0,sort:(t,_)=>t.localeCompare(_)},{name:"surname",label:i("ladderTable.surnameLabel"),field:t=>h.people[t.fencer_id].surname,align:"left",sortable:!0,sort:(t,_)=>t.localeCompare(_)},{name:"club",label:i("clubLabel"),field:t=>{var s;const _=(s=h.peopleClubs)==null?void 0:s[t.fencer_id];return _===void 0?"_":h.clubs[_].name},format:t=>t==="_"?i("noClub"):t,align:"left",sortable:!0,sort:(t,_)=>t==="_"?_==="_"?0:1:_==="_"?t==="_"?0:-1:t.localeCompare(_)},{name:"points",label:i("pointsLabel"),field:t=>t.points,align:"right",sortable:!0},{name:"noCountedTournaments",label:i("ladderTable.noCountedTournamentsLabel"),field:t=>t.counted_tournaments.length,align:"right",sortable:!0},{name:"noTotalTournaments",label:i("ladderTable.noTotalTournamentsLabel"),field:t=>t.counted_tournaments.length+t.uncounted_tournaments.length,align:"right",sortable:!0},{name:"avgPtsPerTournament",label:i("ladderTable.avgPtsPerTournamentLabel"),field:t=>Math.round(t.points/t.counted_tournaments.length*100)/100,align:"right",sortable:!0},{name:"details",label:i("ladderTable.detailsLabel"),field:"",align:"right"}]),b=W(()=>{var t;if(h.laddersIndividual!==void 0){const _=(t=h.laddersIndividual[T.division])==null?void 0:t[T.category];return _===void 0?null:_}});let l={width:"100%",height:"300px"};function w(){l.height=window.innerHeight-98+"px"}window.addEventListener("resize",w),w();let r=E(null);function k(t){r.value=t}let C=E(null);function Q(t){C.value={...t,division:T.division}}return(t,_)=>(c(),L(B,null,[f(b)!==null?(c(),y(Le,{key:0,ref:"table",columns:f(a),rows:f(b),"row-key":"fencer_id",pagination:{rowsPerPage:0,sortBy:"rank",descending:!1},loading:f(b)===void 0,"binary-state-sort":"","hide-bottom":"",square:"",style:Ne(f(l))},{"header-cell-previous-season-change":o(s=>[m(J,{props:s},{default:o(()=>[v(n(s.col.label)+" ",1),m(x,null,{default:o(()=>[v(n(t.$t("ladderTable.previousSeasonChangeTooltip")),1)]),_:1})]),_:2},1032,["props"])]),"header-cell-avgPtsPerTournament":o(s=>[m(J,{props:s},{default:o(()=>[v(n(s.col.label)+" ",1),m(x,null,{default:o(()=>[v(n(t.$t("ladderTable.avgPtsPerTournamentTooltip")),1)]),_:1})]),_:2},1032,["props"])]),"body-cell-previous-season-change":o(s=>[m(X,{props:s},{default:o(()=>[s.value===null?(c(),L(B,{key:0},[d("div",_t,n(s.value),1),m(x,null,{default:o(()=>[v(n(t.$t("ladderTable.previousSeasonChangeNewInSeasonTooltip")),1)]),_:1})],64)):s.value===0?(c(),y(x,{key:1},{default:o(()=>[v(n(t.$t("ladderTable.previousSeasonChangeNoChangeTooltip")),1)]),_:1})):s.value>0?(c(),L(B,{key:2},[d("div",yt,n(s.value),1),s.value==-1?(c(),y(x,{key:0},{default:o(()=>[v(n(f(i)("ladderTable.previousSeasonChangeWorseTooltip.n1")),1)]),_:1})):s.value>-5?(c(),y(x,{key:1},{default:o(()=>[v(n(f(i)("ladderTable.previousSeasonChangeWorseTooltip.n2",s.value)),1)]),_:2},1024)):(c(),y(x,{key:2},{default:o(()=>[v(n(f(i)("ladderTable.previousSeasonChangeWorseTooltip.n5",s.value)),1)]),_:2},1024))],64)):s.value<0?(c(),L(B,{key:3},[d("div",Tt,n(-s.value),1),s.value==-1?(c(),y(x,{key:0},{default:o(()=>[v(n(f(i)("ladderTable.previousSeasonChangeBetterTooltip.n1")),1)]),_:1})):s.value>-5?(c(),y(x,{key:1},{default:o(()=>[v(n(f(i)("ladderTable.previousSeasonChangeBetterTooltip.n2",-s.value)),1)]),_:2},1024)):(c(),y(x,{key:2},{default:o(()=>[v(n(f(i)("ladderTable.previousSeasonChangeBetterTooltip.n5",-s.value)),1)]),_:2},1024))],64)):N("",!0)]),_:2},1032,["props"])]),"body-cell-details":o(s=>[m(X,{props:s},{default:o(()=>[m(P,{onClick:g=>k(s.row),flat:"",dense:"",round:"",icon:"mdi-information-outline"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["columns","rows","loading","style"])):(c(),L("div",xt,[d("div",kt,n(t.$t("noData")),1)])),f(b)!==null?(c(),y(vt,{key:2,modelValue:f(r),"onUpdate:modelValue":_[0]||(_[0]=s=>ie(r)?r.value=s:r=s),division:e.division,category:e.category,onTournamentDetail:Q},null,8,["modelValue","division","category"])):N("",!0)],64))}});export{Dt as default};
