import{s as d}from"./QList.28074f80.js";import{Q}from"./use-router-link.fb37d025.js";import{Q as m,C as D}from"./country-flag.esm.180d533c.js";import{Q as y}from"./QBtn.69da3013.js";import{a as $}from"./QTable.56332f55.js";import{M as z,u as L,as as N,N as w,_ as u,O as l,P as c,Q as a,at as P,$ as x,a1 as B,Z as o,f as n,Y as s,a2 as V}from"./index.29ac57f4.js";import{u as C}from"./vue-i18n.esm-bundler.990b5f7b.js";import"./rtl.9aeaf1ce.js";const q={key:1},E={class:"text-center text-h2",style:{margin:"2rem"}},R=z({__name:"TournamentsView",props:{season:null,division:null,category:null},setup(k){const f=k,{t:r,d:v}=C(),h=L();N(async()=>{await h.loadSeason(f.season)});const T=w(()=>[{name:"name",label:r("tournamentLabel"),field:e=>e.name+(e.competition_subtitle===void 0?"":" ("+e.competition_subtitle+")"),align:"left",sortable:!0},{name:"date",label:r("dateLabel"),field:e=>e.date,format:e=>v(e),align:"left",sortable:!0},{name:"country",label:r("countryLabel"),field:e=>e.country,align:"left",sortable:!0},{name:"noParticipants",label:r("noParticipantsLabel"),field:e=>e.noParticipants,align:"right",sortable:!0},{name:"results",label:r("resultsLabel"),field:"",align:"center"},{name:"hemaratings",label:r("hemaratingsLabel"),field:"",align:"center"}]),p=w(()=>{if(h.tournaments!==void 0)return Object.entries(h.tournaments).flatMap(e=>{const _=e[0],t=e[1];return t.competitions.filter(i=>i.division===f.division&&i.category===f.category).map(i=>({id:_,name:t.name,competition_subtitle:i.subtitle,date:t.date,country:t.country,championship:t.championship,noParticipants:i.no_participants,results:i.results,results_link:i.results_link}))})});let b={width:"100%",height:"300px"};function g(){b.height=window.innerHeight-98+"px"}return window.addEventListener("resize",g),g(),(e,_)=>u(p)!==null?(l(),c($,{key:0,ref:"table",columns:u(T),rows:u(p),"row-key":"id",loading:u(p)===void 0,pagination:{rowsPerPage:0,sortBy:"date",descending:!1},"binary-state-sort":"","hide-bottom":"",square:"",style:P(u(b))},{"body-cell-name":a(t=>[n(m,{props:t},{default:a(()=>[s(o(t.value)+" ",1),t.row.championship?(l(),c(Q,{key:0,name:"mdi-trophy"},{default:a(()=>[n(d,null,{default:a(()=>[s(o(e.$t("championship")),1)]),_:1})]),_:1})):V("",!0)]),_:2},1032,["props"])]),"body-cell-country":a(t=>[n(m,{props:t},{default:a(()=>[n(u(D),{country:t.value,shadow:!0,size:"normal"},null,8,["country"]),n(d,null,{default:a(()=>[s(o(e.$t("countries."+t.value)),1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-results":a(t=>[n(m,{props:t},{default:a(()=>[n(y,{href:t.row.results_link,target:"_blank",icon:"mdi-open-in-new",flat:"",dense:"",round:"",disable:t.row.results_link===void 0},null,8,["href","disable"]),t.row.results_link===void 0?(l(),c(d,{key:0},{default:a(()=>[s(o(e.$t("resultsNoDetailTooltip")),1)]),_:1})):(l(),c(d,{key:1},{default:a(()=>[s(o(e.$t("resultsDetailTooltip")),1)]),_:1}))]),_:2},1032,["props"])]),"body-cell-hemaratings":a(t=>[n(m,{props:t},{default:a(()=>[n(y,{href:"https://hemaratings.com/events/details/"+t.row.id,target:"_blank",icon:"mdi-open-in-new",flat:"",dense:"",round:"",disable:t.row.id.startsWith("-")},null,8,["href","disable"]),t.row.id.startsWith("-")?(l(),c(d,{key:0},{default:a(()=>[s(o(e.$t("hemaratingsNoDetailTooltip")),1)]),_:1})):(l(),c(d,{key:1},{default:a(()=>[s(o(e.$t("hemaratingsDetailTooltip")),1)]),_:1}))]),_:2},1032,["props"])]),_:1},8,["columns","rows","loading","style"])):(l(),x("div",q,[B("div",E,o(e.$t("noData")),1)]))}});export{R as default};
